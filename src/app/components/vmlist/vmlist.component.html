<div class="content">
  <div class="container-fluid">
    <div class="content-wrapper">
      &nbsp;<br>
      <div class="card card-outline">
        <div class="card-header">
            <h3 class="card-title">
              <i class="fas fa-desktop"></i>
              &nbsp;&nbsp;Virtual Machines 
            </h3>
            <div class="card-tools">
              <button type="button" data-placement="bottom" data-toggle="tooltip" data-original-title="Refresh..." title="Refresh..." class="btn btn-tool" (click)="fullReload()">
                  <i class="fas fa-sync" (click)="fullReload()" title="Refresh..."></i>
              </button>
              <button type="button" data-placement="bottom" data-toggle="tooltip" data-original-title="New VM..." title="New VM..." class="btn btn-tool" (click)="showNewVm()">
                  <i class="fas fa-plus-square" (click)="showNewVm()" title="New VM..."></i>
              </button>
            </div>
        </div>
        <div class="card-body">
            <table datatable id="vmList_datatable" [dtOptions]="vmList_dtOptions" [dtTrigger]="vmList_dtTrigger" class="table table-sm" style="vertical-align: middle !important;">
               <thead>
                 <tr>
                    <th style="width: 10px">&nbsp;</th>
                    <th style="width: 130px">Namespace</th>
                    <th style="width: 160px">Name</th>
                    <th style="width: 10px">Node</th>
                    <th style="width: 70px">VM Type</th>
                    <th style="width: 18px">vCPU</th>
                    <th style="width: 18px">Memory</th>
                    <!-- <th style="width: 80px">Status</th> -->
                    <th style="width: 250px">&nbsp;</th>
                 </tr>
               </thead>
               <tbody>
                <tr *ngFor="let thisVM of vmList">
                    <td style="line-height: 2.2 !important; align-content: center;">
                        <p style="display: none;">{{thisVM.status}}</p>
                        <span [ngSwitch]="thisVM.status">
                          <span *ngSwitchCase="'running'">
                            <span class="badge bg-success"><i class="fas fa-check-circle" title="{{thisVM.status}}"></i></span>
                          </span>
                          <span *ngSwitchDefault>
                            <span class="badge bg-danger"><i class="fas fa-times-circle" title="{{thisVM.status}}"></i></span>
                          </span>
                        </span>
                      </td>
                      <td style="line-height: 2.2 !important;"><a class="btn" routerLink="/vmdetail/{{thisVM.namespace}}/{{thisVM.name}}" title="VM details...">{{thisVM.namespace}}</a></td>
                      <td style="line-height: 2.2 !important;"><a class="btn" routerLink="/vmdetail/{{thisVM.namespace}}/{{thisVM.name}}" title="VM details...">{{thisVM.name}}</a></td>
                      <td style="line-height: 2.2 !important;"><a class="btn" routerLink="/vmdetail/{{thisVM.namespace}}/{{thisVM.name}}" title="VM details...">{{thisVM.nodeSel}}</a></td>
                      <td style="line-height: 2.2 !important;"><a class="btn" routerLink="/vmdetail/{{thisVM.namespace}}/{{thisVM.name}}" title="VM details...">{{thisVM.instType}}</a></td>
                      <td style="line-height: 2.2 !important;"><a class="btn" routerLink="/vmdetail/{{thisVM.namespace}}/{{thisVM.name}}" title="VM details...">{{(thisVM.cores || 0) * (thisVM.sockets || 0) * (thisVM.threads || 0)}}</a></td>
                      <td style="line-height: 2.2 !important;"><a class="btn" routerLink="/vmdetail/{{thisVM.namespace}}/{{thisVM.name}}" title="VM details...">{{thisVM.memory}}</a></td>
                      <!-- <td style="line-height: 2.2 !important;"><a class="btn" routerLink="/vmdetail/{{thisVM.namespace}}/{{thisVM.name}}" title="VM details...">{{thisVM.status}}</a></td> -->
                      <td style="line-height: 0 !important;">
                        <div class="dropdown">
                            <button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown" href="#" aria-expanded="false">Actions</button>
                            <div class="dropdown-menu">
                                <!--- INFO BUTTON -->
                                <span>
                                    <a class="btn" routerLink="/vmdetail/{{thisVM.namespace}}/{{thisVM.name}}" title="Show info...">
                                    <i class="fas fa-info"></i>
                                    </a>
                                </span>
                                <!--- PAUSE BUTTON -->
                                <span [ngSwitch]="thisVM.status">
                                    <a class="btn" (click)='vmOperations("pause", thisVM.namespace, thisVM.name)' title="Pause..." *ngSwitchCase="'running'">
                                        <i class="fas fa-pause"></i>
                                    </a>
                                    <a class="btn disabled" (click)='vmOperations("pause", thisVM.namespace, thisVM.name)' title="Pause..." *ngSwitchDefault>
                                        <i class="fas fa-pause disabled"></i>
                                    </a>
                                    </span>
                                <!--- PLAY BUTTON -->
                                <span [ngSwitch]="thisVM.status">
                                    <a class="btn" (click)='vmOperations("unpause", thisVM.namespace, thisVM.name)' title="Resume..." *ngSwitchCase="'paused'">
                                    <i class="fas fa-play"></i>
                                    </a>
                                    <a class="btn disabled" (click)='vmOperations("unpause", thisVM.namespace, thisVM.name)' title="Resume..." *ngSwitchDefault>
                                    <i class="fas fa-play disabled"></i>
                                    </a>
                                </span>
                                <!--- VNC BUTTON -->
                                <span [ngSwitch]="thisVM.status">
                                    <a class="btn" (click)='openNoVNC(thisVM.namespace, thisVM.name)' title="Open console..." *ngSwitchCase="'running'">
                                    <i class="fas fa-desktop"></i>
                                    </a>
                                    <a class="btn disabled" (click)='openNoVNC(thisVM.namespace, thisVM.name)' title="Open console..." *ngSwitchDefault>
                                    <i class="fas fa-desktop disabled"></i>
                                    </a>
                                </span>
                                <!--- CONFIG BUTTON -->
                                <span [ngSwitch]="thisVM.running">
                                    <a class="btn disabled" title="Config..." *ngSwitchCase="true">
                                    <i class="fas fa-cog disabled"></i>
                                    </a>
                                    <!-- Check if this VM is custom or not -->
                                    <span *ngSwitchDefault>
                                    <span [ngSwitch]="thisVM.instType">
                                        <a class="btn" (click)="showResize(thisVM.name, thisVM.namespace, thisVM.sockets, thisVM.cores, thisVM.threads, thisVM.memory)" title="Config..." *ngSwitchCase="'custom'">
                                        <i class="fas fa-cog"></i>
                                        </a>
                                        <a class="btn" (click)="showType(thisVM.name, thisVM.namespace)" title="Config..." *ngSwitchDefault>
                                        <i class="fas fa-cog"></i>
                                        </a>
                                        </span>
                                    </span>
                                </span>
                                <!--- POWER ON BUTTON -->
                                <span [ngSwitch]="thisVM.running">
                                    <a class="btn disabled" (click)='vmOperations("start", thisVM.namespace, thisVM.name)' title="Power on..." *ngSwitchCase="true">
                                    <i class="fas fa-plug disabled"></i>
                                    </a>
                                    <a class="btn" (click)='vmOperations("start", thisVM.namespace, thisVM.name)' title="Power on..." *ngSwitchDefault>
                                    <i class="fas fa-plug"></i>
                                    </a>
                                </span>
                                <!--- POWER OFF BUTTON -->
                                <span [ngSwitch]="thisVM.running">
                                    <a class="btn" (click)='vmOperations("stop", thisVM.namespace, thisVM.name)' title="Power off..." *ngSwitchCase="true">
                                    <i class="fas fa-power-off"></i>
                                    </a>
                                    <a class="btn disabled" (click)='vmOperations("stop", thisVM.namespace, thisVM.name)' title="Power off..." *ngSwitchDefault>
                                    <i class="fas fa-power-off disabled"></i>
                                    </a>
                                </span>
                                <!--- RESTART BUTTON -->
                                <span [ngSwitch]="thisVM.running">
                                    <a class="btn" (click)='vmOperations("reboot", thisVM.namespace, thisVM.name)' title="Restart..." *ngSwitchCase="true">
                                    <i class="fas fa-redo"></i>
                                    </a>
                                    <a class="btn disabled" (click)='vmOperations("reboot", thisVM.namespace, thisVM.name)' title="Restart..." *ngSwitchDefault>
                                    <i class="fas fa-redo disabled"></i>
                                    </a>
                                </span>
                                <!--- LIVEMIGRATE BUTTON -->
                                <span [ngSwitch]="thisVM.running">
                                    <a class="btn" (click)='vmOperations("migrate", thisVM.namespace, thisVM.name)' title="Live Migrate..." *ngSwitchCase="true">
                                    <i class="fas fa-angle-double-right"></i>
                                    </a>
                                    <a class="btn disabled" (click)='vmOperations("migrate", thisVM.namespace, thisVM.name)' title="Live Migrate..." *ngSwitchDefault>
                                    <i class="fas fa-angle-double-right disabled"></i>
                                    </a>
                                </span>
                                <!--- DELETE BUTTON -->
                                <span [ngSwitch]="thisVM.running">
                                    <a class="btn disabled" (click)="showDelete(thisVM.name, thisVM.namespace)" title="Delete..." *ngSwitchCase="true">
                                    <i class="fas fa-trash disabled"></i>
                                    </a>
                                    <a class="btn" (click)="showDelete(thisVM.name, thisVM.namespace)" title="Delete..." *ngSwitchDefault>
                                    <i class="fas fa-trash"></i>
                                    </a>
                                </span>
                            </div>
                        </div>
                      </td>
                </tr>
               </tbody>
            </table>
        </div>
    </div>

    <!--               -->
    <!-- Modal: New Vm -->
    <!--               -->
    <div class="modal fade" id="modal-newvm" style="display: none;" aria-hidden="true">
      <div class="modal-dialog modal-xl">
        <div class="modal-content">
        <div name="newvmform" id="newvmform">
          <div class="modal-header">
            <h4 class="modal-title" id="newvm-title">TITLE_TEMPLATE</h4>
            <button type="button" class="close" (click)='hideComponent("modal-newvm")'>
              <span aria-hidden="true">×</span>
            </button>
          </div>
          <div class="modal-body" id="newvm-value">
            <div class="card card-primary card-tabs">
              <div class="card-header p-0 pt-1">
                <!-- TABS Selector-->
                <ul class="nav nav-tabs" id="custom-tabs-two-tab" role="tablist">
                  <li class="nav-item">
                    <a class="nav-link active" id="newvm-home-tab" data-toggle="pill" href="#newvm-home" role="tab" aria-controls="newvm-home" aria-selected="false">Basic</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" id="newvm-labels-tab" data-toggle="pill" href="#newvm-meta" role="tab" aria-controls="newvm-meta" aria-selected="false">Metadata</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" id="newvm-cpumem-tab" data-toggle="pill" href="#newvm-cpumem" role="tab" aria-controls="newvm-cpumem" aria-selected="false">CPU/Memory</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" id="newvm-disks-tab" data-toggle="pill" href="#newvm-disks" role="tab" aria-controls="newvm-disks" aria-selected="false">Disk</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" id="newvm-net-tab" data-toggle="pill" href="#newvm-net" role="tab" aria-controls="newvm-net" aria-selected="false">Networking</a>
                  </li>
                  <!-- <li class="nav-item">
                    <a class="nav-link" id="newvm-userdata-tab" data-toggle="pill" href="#newvm-userdata" role="tab" aria-controls="newvm-userdata" aria-selected="false">User Data</a>
                  </li> -->
                  <li class="nav-item">
                    <!-- This is hidden by default, and only shown if Network != podNetwork -->
                    <a class="nav-link" id="newvm-netdata-tab" data-toggle="pill" href="#newvm-netdata" role="tab" aria-controls="newvm-netdata" aria-selected="false" style="display: none;">Network Data</a>
                  </li>
                  <!-- <li class="nav-item">
                    <a class="nav-link" id="newpool-initscript-tab" data-toggle="pill" href="#newpool-initscript" role="tab" aria-controls="newpool-initscript" aria-selected="false">Init Script</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" id="newvm-windows-initscript-tab" data-toggle="pill" href="#newvm-windows-initscript" role="tab" aria-controls="newvm-windows-initscript" aria-selected="false"> Init Windows Script</a>                  
                  </li> -->
                  <li class="nav-item">
                    <a class="nav-link" id="newvm-initscript-tab" data-toggle="pill" href="#newvm-initscript" role="tab" aria-controls="newvm-initscript" aria-selected="false">Init Script</a>                  
                  </li>
                </ul>
              </div>
              <div class="card-body">
                <div class="tab-content" id="custom-tabs-two-tabContent">
                   <!-- HOME TAB -->
                  <div class="tab-pane fade show active" id="newvm-home" role="tabpanel" aria-labelledby="newvm-home-tab">
                    <label for="newvm-name">Name:</label>
                    <input #newvmname type="text" class="form-control" id="newvm-name" name="newvm-name">
                    <label for="newvm-namespaces">Namespace:</label>
                    <select #newvmnamespace class="custom-select rounded-0" name="newvm-namespace" id="newvm-namespace" (change)="onChangeNamespace(newvmnamespace.value)">
                      <option>Value 1</option>
                    </select>
                    <label for="newvm-node">Node:</label>
                    <select #newvmnode class="custom-select rounded-0" name="newvm-node" id="newvm-node">
                      <option value="auto-select">auto-select</option>
                    </select>
                    <label for="newvm-runstrategy">Run Strategy:</label>
                    <select #newvmrunstrategy class="custom-select rounded-0" name="newvm-runstrategy" id="newvm-runstrategy">
                      <option value="Always">Always</option>
                      <option value="Halted">Halted</option>
                      <option value="Manual">Manual</option>
                      <option value="Once">Once</option>
                      <option value="RerunOnFailure">RerunOnFailure</option>
                    </select>
                  </div>
                  <!-- METADATA TAB -->
                  <div class="tab-pane fade" id="newvm-meta" role="tabpanel" aria-labelledby="newvm-meta-tab">
                    <div class="row">
                        <label for="newvm-labels">Labels:&nbsp;
                          <a class="btn" (click)="addLabel()" title="Add new label...">
                            <i class="fas fa-plus"></i>
                          </a>
                        </label>
                    </div>
                    <div class="row">
                        <form [formGroup]="labelList">
                            <table class="table table-sm" style="vertical-align: middle !important;">
                                <thead>
                                    <tr>
                                    <th style="width: 500px">Key</th>
                                    <th style="width: 500px">Value</th>
                                    <th style="width: 100px">&nbsp;</th>
                                    </tr>
                                </thead>
                                <tbody formArrayName="labels"> 
                                    <tr *ngFor="let label of labels.controls; let i = index" [formGroupName]="i">
                                      <td style="line-height: 2.2 !important;"><input type="text" class="form-control" name="newvm-labelkey" id="labelKey{{i}}" formControlName="labelKey"></td>
                                      <td style="line-height: 2.2 !important;"><input type="text" class="form-control" name="newvm-labelvalue" id="labelValue{{i}}" formControlName="labelValue"></td>
                                      <td style="line-height: 2.2 !important;">
                                        <a class="btn" (click)="removeLabel(i)" title="Remove label...">
                                            <i class="fas fa-trash"></i>
                                        </a>
                                      </td>
                                    </tr>
                                </tbody>
                            </table>
                        </form>
                    </div>
                    <div class="row">
                        <label for="newvm-annotations">Annotations:&nbsp;
                          <a class="btn" (click)="addAnnotation()" title="Add new annotation...">
                            <i class="fas fa-plus"></i>
                          </a>
                        </label>
                    </div>
                    <div class="row">
                        <form [formGroup]="annotationList">
                            <table class="table table-sm" style="vertical-align: middle !important;">
                                <thead>
                                    <tr>
                                    <th style="width: 500px">Key</th>
                                    <th style="width: 500px">Value</th>
                                    <th style="width: 100px">&nbsp;</th>
                                    </tr>
                                </thead>
                                <tbody formArrayName="annotations"> 
                                    <tr *ngFor="let annotation of annotations.controls; let i = index" [formGroupName]="i">
                                      <td style="line-height: 2.2 !important;"><input type="text" class="form-control" name="newvm-annotationkey" id="annotKey{{i}}" formControlName="annotKey"></td>
                                      <td style="line-height: 2.2 !important;"><input type="text" class="form-control" name="newvm-annotationvalue" id="annotValue{{i}}" formControlName="annotValue"></td>
                                      <td style="line-height: 2.2 !important;">
                                        <a class="btn" (click)="removeAnnotation(i)" title="Remove annotation...">
                                            <i class="fas fa-trash"></i>
                                        </a>
                                      </td>
                                    </tr>
                                </tbody>
                            </table>
                        </form>
                    </div>
                  </div>
                  <!-- CPU/MEM TAB -->
                  <div class="tab-pane fade" id="newvm-cpumem" role="tabpanel" aria-labelledby="newvm-cpumem-tab">
                    <label for="newvm-namespaces">Virtual Machine Type:</label>
                    <select #newvmtype class="custom-select rounded-0" name="newvm-type" id="newvm-type" (change)="onChangeType(newvmtype.value)">
                        <option>Value 1</option>
                    </select>
                    <div class="pane fade" id="custom-cpu-memory" name="custom-cpu-memory" style="display: none;" aria-hidden="true">
                        <label for="newvm-cpumem-sockets">Sockets:</label>
                        <input #newvmcpumemsockets type="number" class="form-control" id="newvm-cpumem-sockets" name="newvm-cpumem-sockets">
                        <label for="newvm-cpumem-cores">Cores:</label>
                        <input #newvmcpumemcores type="number" class="form-control" id="newvm-cpumem-cores" name="newvm-cpumem-cores">
                        <label for="newvm-cpumem-threads">Threads:</label>
                        <input #newvmcpumemthreads type="number" class="form-control" id="newvm-cpumem-threads" name="newvm-cpumem-threads">
                        <label for="newvm-cpumem-memory">Memory (in GB):</label>
                        <input #newvmcpumemmemory type="number" class="form-control" id="newvm-cpumem-memory" name="newvm-cpumem-memory">
                    </div>
                    <label for="newvm-priorityclass">Priority Class:</label>
                    <select #newvmpc class="custom-select rounded-0" name="newvm-pc" id="newvm-pc">
                        <option>Value 1</option>
                    </select>
                    <label for="newvm-firmware">Firmware:</label>
                    <select #newvmfirmware class="custom-select rounded-0" name="newvm-firmware" id="newvm-firmware" (change)="onChangeFirmware(newvmfirmware.value)">
                        <option value="bios" selected>BIOS</option>
                        <option value="uefi">UEFI</option>
                    </select>
                    <label for="newvm-secureboot">Secure Boot:</label>
                    <select #newvmsecureboot class="custom-select rounded-0" name="newvm-secureboot" id="newvm-secureboot" disabled>
                        <option value="false" selected>false</option>
                        <option value="true">true</option>
                    </select>
                  </div>
                  <!-- DISK TAB -->
                  <div class="tab-pane fade" id="newvm-disks" role="tabpanel" aria-labelledby="newvm-disks-tab">
                    <div class="row">
                        <label for="newvm-disks">Disks:&nbsp;
                          <a class="btn" (click)="addDisk()" title="Add new disk...">
                            <i class="fas fa-plus"></i>
                          </a>
                        </label>
                    </div>
                    <div class="row">
                        <form [formGroup]="diskList">
                            <div formArrayName="disks" style="width: 100%; min-width: 1085px;">
                                <div class="card card-outline" *ngFor="let disk of disks.controls; let i = index" [formGroupName]="i">
                                    <div class="card-header">
                                        <b class="card-title" style="font-weight: bold;"><i class="fas fa-hdd"></i> &nbsp; disk{{i}}</b>
                                        <div class="card-tools">
                                            <button type="button" class="btn btn-tool" (click)="removeDisk(i)" title="Remove disk...">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                          <button type="button" class="btn btn-tool" data-card-widget="collapse">
                                            <i class="fas fa-minus"></i>
                                          </button>
                                        </div>
                                    </div>
                                    <div class="card-body" style="display: block;">
                                        <div class="row">
                                            <div class="col-3" name="newvm-disk-type-col">
                                                <label for="newvm-disktype-{{i}}">Type:</label>
                                                <select #disktype class="custom-select rounded-0" name="newvm-disktype-{{i}}" id="diskType-{{i}}" formControlName="diskType" (change)="onChangeDisk(newvmnamespace.value, i)">
                                                    <option selected></option>
                                                    <option value="blank">Blank Disk</option>
                                                    <option value="image">Image</option>
                                                    <option value="dv">DataVolume</option>
                                                </select>
                                            </div>
                                            <div class="col-5">
                                                <label for="newvm-diskvalue-{{i}}">Value:</label>
                                                <select #newvmdiskvalue class="custom-select rounded-0" name="newvm-diskvalue-{{i}}" id="diskValue-{{i}}" formControlName="diskValue">
                                                </select>
                                            </div>
                                            <div class="col-2">
                                                <label for="newvm-disksize-{{i}}">Size/GB:</label>
                                                <input #newvmdisksize type=number class="form-control" name="newvm-disksize-{{i}}" id="diskSize-{{i}}" formControlName="diskSize">
                                            </div>
                                            <div class="col-2">
                                              <label for="newvm-bootorder-{{i}}">Boot Order:</label>
                                              <input #newvmdiskbootorder type=number class="form-control" name="newvm-diskbootorder-{{i}}" id="diskBootOrder-{{i}}" formControlName="diskBootOrder">
                                            </div>
                                        </div>
                                        <div class="row">&nbsp;</div>
                                        <div class="row">
                                          <div class="col-3">
                                            <label for="newvm-disksc-{{i}}">Storage Class:</label>
                                            <select #newvmdisksc class="custom-select rounded-0" name="newvm-disksc-{{i}}" id="diskStorageClass-{{i}}" formControlName="diskStorageClass">
                                            </select>
                                          </div>
                                          <div class="col-3">
                                            <label for="newvm-diskam-{{i}}">Access Mode:</label>
                                            <select #newvmdiskam class="custom-select rounded-0" name="newvm-diskeam-{{i}}" id="diskAccessMode-{{i}}" formControlName="diskAccessMode">
                                                <option selected></option>
                                                <option>ReadWriteOnce</option>
                                                <option>ReadOnlyMany</option>
                                                <option>ReadWriteMany</option>
                                            </select>
                                          </div>
                                          <div class="col-2">
                                            <label for="newvm-diskcm-{{i}}">Cache Mode:</label>
                                            <select #newvmdiskcm class="custom-select rounded-0" name="newvm-diskcm-{{i}}" id="diskCacheMode-{{i}}" formControlName="diskCacheMode">
                                                <option value="" selected>Automatic</option>
                                                <option value="none">None</option>
                                                <option value="writethrough">WriteThrough</option>
                                                <option value="writeback">WriteBack</option>
                                            </select>
                                          </div>
                                          <div class="col-2">
                                            <label for="newvm-diskcm-{{i}}">Bus:</label>
                                            <select #newvmdiskbus class="custom-select rounded-0" name="newvm-diskbus-{{i}}" id="diskBus-{{i}}" formControlName="diskBus">
                                                <option value="" selected></option>
                                                <option value="virtio">virtio</option>
                                                <option value="sata">sata</option>
                                                <option value="scsi">scsi</option>
                                            </select>
                                          </div>
                                          <div class="col-2">
                                            <label for="newvm-diskmode-{{i}}">Volume Mode:</label>
                                            <select #newvmdiskbus class="custom-select rounded-0" name="newvm-diskmode-{{i}}" id="diskMode-{{i}}" formControlName="diskMode">
                                                <option value="Filesystem" selected>Filesystem</option>
                                                <option value="Block">Block</option>
                                            </select>
                                          </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                  </div>
                  <!-- NETWORK TAB -->
                  <div class="tab-pane fade" id="newvm-net" role="tabpanel" aria-labelledby="newvm-net-tab">
                    <div class="row">
                        <label for="newvm-nics">Interfaces:&nbsp;
                          <a class="btn" (click)="addNic()" title="Add new network...">
                            <i class="fas fa-plus"></i>
                          </a>
                        </label>
                    </div>
                    <div class="row">
                        <form [formGroup]="nicList">
                            <div formArrayName="nics" style="width: 100%; min-width: 800px;">
                                <div class="card card-outline" *ngFor="let nic of nics.controls; let j = index" [formGroupName]="j">
                                    <div class="card-header">
                                        <b class="card-title" style="font-weight: bold;"><i class="fas fa-network-wired"></i> &nbsp; nic{{j}}</b>
                                        <div class="card-tools">
                                            <button type="button" class="btn btn-tool" (click)="removeNic(j)" title="Remove network...">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                          <button type="button" class="btn btn-tool" data-card-widget="collapse">
                                            <i class="fas fa-minus"></i>
                                          </button>
                                        </div>
                                    </div>
                                    <div class="card-body" style="display: block;">
                                        <div class="row">
                                            <div class="col-3" name="newvm-netname-col">
                                                <label for="newvm-netname-{{j}}">Network:</label>
                                                <select style="min-width: 300px;" class="custom-select rounded-0" name="newvm-netname-{{j}}" id="networkName-{{j}}" formControlName="networkName" (change)="onChangeNetwork(j)">
                                                    <option value="" selected></option>
                                                </select>
                                            </div>
                                            <div class="col-1">&nbsp;</div>
                                            <div class="col-3" name="newvm-nettype-col">
                                                <label for="newvm-nettype-{{j}}">Type:</label>
                                                <select #nettype style="min-width: 300px;" class="custom-select rounded-0" name="newvm-nettype-{{j}}" id="networkType-{{j}}" formControlName="networkType">
                                                    <option value=bridge>bridge</option>
                                                    <option value=macvtap>macvtap</option>
                                                    <option value=masquerade>masquerade</option>
                                                </select>
                                            </div>
                                            <div class="col-1">&nbsp;</div>
                                            <div class="col-3" name="newvm-netdrv-col">
                                                <label for="newvm-netdrv-{{j}}">Driver:</label>
                                                <select #netdrv style="min-width: 300px;" class="custom-select rounded-0" name="newvm-netdrv-{{j}}" id="networkDriver-{{j}}" formControlName="networkDriver">
                                                    <option value=virtio selected>virtio</option>
                                                    <option value=e1000>e1000</option>
                                                    <option value=e1000e>e1000e</option>
                                                    <option value=ne2k_pci>ne2k_pci</option>
                                                    <option value=pcnet>pcnet</option>
                                                    <option value=rtl8139>rtl8139</option>
                                                </select>
                                            </div>
                                            <div class="col-1">&nbsp;</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                  </div>
                  <!-- USERDATA TAB -->
                  <!-- <div class="tab-pane fade" id="newvm-userdata" role="tabpanel" aria-labelledby="newvm-userdata-tab">
                    <label for="newvm-userdata-username">Username:</label>
                    <input #newvmuserdatausername type="text" class="form-control" id="newvm-userdata-username" name="newvm-userdata-username">
                    <label for="newvm-userdata-auth">Authentication:</label>
                    <select #newvmuserdataauth class="custom-select rounded-0" name="newvm-userdata-auth" id="newvm-userdata-auth" (change)="onChangeAuthType(newvmuserdataauth.value, newvmnamespace.value)">
                      <option value="password">User/Password</option>
                      <option value="ssh">SSH Private Key</option>
                    </select>
                    <div class="pane fade show" id="newvm-userdata-password-panel" name="newvm-userdata-password-panel" style="display: contents;" aria-hidden="false">
                        <label for="newvm-userdata-password">Password:</label>
                        <input #newvmuserdatapassword type="password" class="form-control" id="newvm-userdata-password" name="newvm-userdata-password">
                    </div>
                    <div class="pane fade" id="newvm-userdata-ssh-panel" name="newvm-userdata-ssh-panel" style="display: none;" aria-hidden="true">
                        <label for="newvm-userdata-ssh">SSH Key:</label>
                        <select #newvmuserdatassh class="custom-select rounded-0" name="newvm-userdata-ssh" id="newvm-userdata-ssh">
                            <option>Loading...</option>
                        </select>
                    </div>
                  </div> -->
                  
                  <!-- NETWORK DATA TAB -->
                  <div class="tab-pane fade" id="newvm-netdata" role="tabpanel" aria-labelledby="newvm-netdata-tab">
                    <label for="newvm-netdata-ip">nic0 IP:</label>
                    <input #newvmnetdataip type="text" class="form-control" id="newvm-netdata-ip" name="newvm-netdata-ip">
                    <label for="newvm-netdata-netmask">nic0 Netmask:</label>
                    <input #newvmnetdatanetmask type="text" class="form-control" id="newvm-netdata-netmask" name="newvm-netdata-netmask">
                    <label for="newvm-netdata-gw">nic0 Gateway:</label>
                    <input #newvmnetdatagw type="text" class="form-control" id="newvm-netdata-gw" name="newvm-netdata-gw">
                    <label for="newvm-netdata-dns1">DNS 1:</label>
                    <input #newvmnetdatadns1 type="text" class="form-control" id="newvm-netdata-dns1" name="newvm-netdata-dns1">
                    <label for="newvm-netdata-dns2">DNS 2:</label>
                    <input #newvmnetdatadns2 type="text" class="form-control" id="newvm-netdata-dns2" name="newvm-netdata-dns2">
                  </div>
                  <!-- INIT SCRIPT -->
                  <!-- <div class="tab-pane fade" id="newpool-initscript" role="tabpanel" aria-labelledby="newpool-initscript-tab">
                    <textarea #newpoolinitscript class="form-control" rows="14" cols="10" name="newpool-initscript" id="newpool-initscript" placeholder=""></textarea>
                  </div> -->
                  <!-- windows INIT SCRIPT -->
                  <!-- <div class="tab-pane fade" id="newvm-windows-initscript" role="tabpanel" aria-labelledby="newvm-windows-initscript-tab">
                    <textarea #newvmwindowsinitscript class="form-control" rows="14" cols="10" name="newvm-windows-initscript"
                      id="newvm-windows-initscript" placeholder=""></textarea>
                  </div> -->
                  <!-- INIT SCRIPT both -->  
                  <div class="tab-pane fade" id="newvm-initscript" role="tabpanel" aria-labelledby="newvm-initscript-tab">

                    <!-- OS selection bar -->
                    <ul class="nav nav-tabs" id="os-selection-tab" role="tablist">
                      <li class="nav-item">
                        <a class="nav-link active" id="windows-tab" data-toggle="tab" href="#windows" role="tab" aria-controls="windows" aria-selected="false">Windows</a>
                      </li>
                      <li class="nav-item">
                        <a class="nav-link" id="linux-tab" data-toggle="tab" href="#linux" role="tab" aria-controls="linux" aria-selected="true">Linux</a>
                      </li>
                    </ul>
                    
                    <!-- OS Tabs -->
                    <div class="tab-content" id="osTabContent">
                      <!-- Windows -->
                      <div class="tab-pane fade show active" id="windows" role="tabpanel" aria-labelledby="windows-tab">
                        <h5>Windows Init Script</h5>
                        <textarea #newvmwindowsinitscript class="form-control" rows="14" cols="10" name="newvm-windows-initscript"
                          id="newvm-windows-initscript" placeholder=""></textarea>
                      </div>
                      <!-- Linux -->
                      <div class="tab-pane fade" id="linux" role="tabpanel" aria-labelledby="linux-tab">
                        <!-- <h5>Linux Init Script</h5> -->
                        <fieldset>
                          <legend>User Data</legend>
                          <label for="newvm-userdata-username">Username:</label>
                          <input #newvmuserdatausername type="text" class="form-control" id="newvm-userdata-username" name="newvm-userdata-username">
                          <label for="newvm-userdata-auth">Authentication:</label>
                          <select #newvmuserdataauth class="custom-select rounded-0" name="newvm-userdata-auth" id="newvm-userdata-auth" (change)="onChangeAuthType(newvmuserdataauth.value, newvmnamespace.value)">
                            <option value="password">User/Password</option>
                            <option value="ssh">SSH Private Key</option>
                          </select>
                          <div class="pane fade show" id="newvm-userdata-password-panel" name="newvm-userdata-password-panel" style="display: contents;" aria-hidden="false">
                              <label for="newvm-userdata-password">Password:</label>
                              <input #newvmuserdatapassword type="password" class="form-control" id="newvm-userdata-password" name="newvm-userdata-password">
                          </div>
                          <div class="pane fade" id="newvm-userdata-ssh-panel" name="newvm-userdata-ssh-panel" style="display: none;" aria-hidden="true">
                              <label for="newvm-userdata-ssh">SSH Key:</label>
                              <select #newvmuserdatassh class="custom-select rounded-0" name="newvm-userdata-ssh" id="newvm-userdata-ssh">
                                  <option>Loading...</option>
                              </select>
                          </div>
                        </fieldset>

                        <hr>

                        <fieldset>
                          <legend>Init Script</legend>

                          <textarea #newpoolinitscript class="form-control" rows="9" cols="10" name="newpool-initscript" id="newpool-initscript" placeholder=""></textarea>
                        </fieldset>
                      </div>
                    </div>


                  </div>
                </div>
              </div>
              <!-- /.card -->
            </div>
          </div>
          <div class="modal-footer justify-content-between">
            <button type="button" class="btn btn-default" (click)='hideComponent("modal-newvm")'>Close</button>
            <button type="button" class="btn btn-primary" (click)="applyNewVm(newvmname.value, newvmnamespace.value, newvmnode.value, newvmrunstrategy.value, newvmtype.value, newvmcpumemsockets.value, newvmcpumemcores.value, newvmcpumemthreads.value, newvmcpumemmemory.value, newvmpc.value, newvmfirmware.value, newvmsecureboot.value, newvmuserdatausername.value, newvmuserdataauth.value, newvmuserdatapassword.value, newvmuserdatassh.value, newvmnetdataip.value, newvmnetdatanetmask.value, newvmnetdatagw.value, newvmnetdatadns1.value, newvmnetdatadns2.value, newpoolinitscript.value, newvmwindowsinitscript.value)">Create</button>
          </div>
        </div>
        </div>
        <!-- /.modal-content -->
      </div>
      <!-- /.modal-dialog -->
    </div>

    <!--               -->
    <!-- Modal: Delete -->
    <!--               -->
    <div class="modal fade" id="modal-delete" style="display: none;" aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h4 class="modal-title" id="delete-title">TITLE_TEMPLATE</h4>
            <button type="button" class="close" (click)='hideComponent("modal-delete")'>
              <span aria-hidden="true">×</span>
            </button>
          </div>
          <input type="hidden" id="delete-namespace" name="delete-namespace" value="">
          <input type="hidden" id="delete-name" name="delete-name" value="">
          <div class="modal-body" id="delete-value">
            <p>BODY_TEMPLATE</p>
          </div>
          <div class="modal-footer justify-content-between">
            <button type="button" class="btn btn-default" (click)='hideComponent("modal-delete")'>Close</button>
            <button type="button" class="btn btn-danger" (click)="applyDelete()">Delete</button>
          </div>
        </div>
        <!-- /.modal-content -->
      </div>
      <!-- /.modal-dialog -->
    </div>

    <!--                    -->
    <!-- Modal: Change Type -->
    <!--                    -->
    <div class="modal fade" id="modal-type" style="display: none;" aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h4 class="modal-title" id="type-title">TITLE_TEMPLATE</h4>
            <button type="button" class="close" (click)='hideComponent("modal-type")'>
              <span aria-hidden="true">×</span>
            </button>
          </div>
          <input type="hidden" id="type-vm" name="type-vm" value="">
          <input type="hidden" id="type-namespace" name="type-namespace" value="">
          <div class="modal-body" id="type-value">
            <label for="newType">Virtual Machine Type:</label>
            <select #changevmtype class="custom-select rounded-0" name="changevm-type" id="changevm-type">
                <option>Value 1</option>
            </select>
          </div>
          <div class="modal-footer justify-content-between">
            <button type="button" class="btn btn-default" (click)='hideComponent("modal-type")'>Close</button>
            <button type="button" class="btn btn-primary" (click)="applyType(changevmtype.value)">Save changes</button>
          </div>
        </div>
        <!-- /.modal-content -->
      </div>
      <!-- /.modal-dialog -->
    </div>

    <!--               -->
    <!-- Modal: Resize -->
    <!--               -->
    <div class="modal fade" id="modal-resize" style="display: none;" aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h4 class="modal-title" id="resize-title">TITLE_TEMPLATE</h4>
            <button type="button" class="close" (click)='hideComponent("modal-resize")'>
              <span aria-hidden="true">×</span>
            </button>
          </div>
          <div class="modal-body" id="resize-value">
            <input #resizeName type="hidden" id="resize-name" name="resize-name" value="">
            <input #resizeNamespace type="hidden" id="resize-namespace" name="resize-namespace" value="">
            <label for="fileInput">Sockets:</label>
            <input #resizeSockets type="number" class="form-control" id="resize-sockets" name="resize-sockets">
            <label for="fileInput">Cores:</label>
            <input #resizeCores type="number" class="form-control" id="resize-cores" name="resize-cores">
            <label for="fileInput">Threads:</label>
            <input #resizeThreads type="number" class="form-control" id="resize-threads" name="resize-threas">
            <label for="fileInput">Memory (in GB):</label>
            <input #resizeMemory type="number" class="form-control" id="resize-memory" name="resize-memory">
          </div>
          <div class="modal-footer justify-content-between">
            <button type="button" class="btn btn-default" (click)='hideComponent("modal-resize")'>Close</button>
            <button type="button" class="btn btn-primary" (click)="applyResize(resizeSockets.value, resizeCores.value, resizeThreads.value, resizeMemory.value)">Save changes</button>
          </div>
        </div>
        <!-- /.modal-content -->
      </div>
      <!-- /.modal-dialog -->
    </div>
  </div>
</div>
